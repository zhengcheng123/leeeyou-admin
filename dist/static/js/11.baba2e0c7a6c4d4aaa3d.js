webpackJsonp([11],{BsuH:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.i(o("IldX"),""),t.push([e.i,".search-bar>div .search-item[data-v-b5a78ec6]{-webkit-box-flex:0;-ms-flex:none;flex:none;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;padding-right:0}.search-bar[data-v-b5a78ec6]{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}",""])},Cdx3:function(e,t,o){var a=o("sB3e"),i=o("lktj");o("uqUo")("keys",function(){return function(e){return i(a(e))}})},IldX:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,".search-bar{display:flex;flex-flow:row wrap;align-items:center;background-color:#fff;padding:45px 35px;margin-bottom:-20px;min-height:36px}.search-bar>div .search-item{flex:0 0 20%;display:flex;flex-direction:row;align-items:center;margin:0 20px 20px 0}.label{font-size:14px;color:#333;font-weight:400;white-space:nowrap;padding-left:10px}.el-input{width:200px}.el-input__inner{line-height:38px!important}.el-date-editor{width:200px}.search-item2{flex:0 0 20%;display:flex;flex-direction:row;align-items:center;margin:0 20px 20px 0}.search-item2 .label{font-size:14px;color:#333;white-space:nowrap;font-weight:400;font-family:Source Han Sans CN}.search-item2 .el-input{width:200px}.search-item2 .el-input__inner{line-height:38px!important}.search-item2 .el-date-editor{width:200px}.search-btn{justify-content:space-between}.search-btn,.search-btnT{margin-right:0;flex:1;display:flex;flex-direction:row;align-items:center}.search-btnT>div{flex:1;display:flex;flex-direction:row;justify-content:flex-end}.el-button{width:78px;height:36px;font-size:15px!important;margin:0 15px 20px 0!important}.el-button>div{flex:1;display:flex;flex-direction:row;justify-content:flex-end}.el-button{font-size:14px!important;margin:0 15px 0 0!important;margin-left:10px}.el-button:last-child{margin-right:0}.el-table th{background-color:#e8eaee}.crumbs{padding-bottom:10px}",""])},dmLd:function(e,t,o){"use strict";function a(e){o("v2DB")}Object.defineProperty(t,"__esModule",{value:!0});var i=o("svrf"),n=o("h5Nm"),r=o("VU/8"),l=a,s=r(i.a,n.a,!1,l,"data-v-b5a78ec6",null);t.default=s.exports},fZjL:function(e,t,o){e.exports={default:o("jFbC"),__esModule:!0}},h5Nm:function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"wrapper role-manage"},[o("div",{staticClass:"content"},[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[o("i",{staticClass:"fa fa-shopping-bag",attrs:{"aria-hidden":"true"}}),e._v("\n          角色管理\n        ")])],1)],1),e._v(" "),o("div",{staticClass:"search-bar"},[o("div",{staticClass:"search-item"},[o("span",{staticClass:"label"},[e._v("角色名称：")]),e._v(" "),o("el-input",{attrs:{placeholder:"请输入",size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getTableItems(t)}},model:{value:e.conditionForm.condition[0].value,callback:function(t){e.$set(e.conditionForm.condition[0],"value","string"==typeof t?t.trim():t)},expression:"conditionForm.condition[0].value"}})],1),e._v(" "),o("div",{staticClass:"search-btnT"},[o("el-button",{staticClass:"f-left",attrs:{type:"primary",size:"small"},on:{click:e.searchData}},[e._v("查询")]),e._v(" "),o("el-button",{staticClass:"f-left",attrs:{type:"primary",size:"small",disabled:0!==e.checkId.length},on:{click:e.addItems}},[e._v("添加")]),e._v(" "),o("el-button",{staticClass:"f-left",attrs:{type:"info",disabled:0==e.checkId.length},on:{click:function(t){return e.deleteItems()}}},[e._v("删除")]),e._v(" "),o("el-button",{staticClass:"f-left",attrs:{type:"primary",size:"small",disabled:1!==e.checkId.length},on:{click:function(t){return e.editItems(1)}}},[e._v("编辑")])],1)]),e._v(" "),o("section",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{"element-loading-text":"数据请求中","element-loading-spinner":"el-icon-loading"}},[o("el-table",{attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange,"row-dblclick":e.editItems}},[o("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),e._v(" "),o("el-table-column",{attrs:{type:"index",align:"center",width:"55",label:"序号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roleName","min-width":"200",sortable:"",align:"center","show-overflow-tooltip":"",label:"角色名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"roleDesc","min-width":"150",sortable:"",align:"center","show-overflow-tooltip":"",label:"角色描述"}}),e._v(" "),o("el-table-column",{attrs:{prop:"createTime","min-width":"220",sortable:"",align:"center","show-overflow-tooltip":"",label:"创建时间"}}),e._v(" "),o("el-table-column",{attrs:{prop:"updateTime","min-width":"220",sortable:"",align:"center","show-overflow-tooltip":"",label:"更新时间"}}),e._v(" "),o("el-table-column",{attrs:{width:"240",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{staticClass:"success",attrs:{type:"text",size:"small"},on:{click:function(o){return e.getRootTreeInfo(t.row)}}},[e._v("设置权限")])]}}])})],1)],1),e._v(" "),o("footer",[o("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.conditionForm.page.pageNum,"page-sizes":[15,30,50,100],"page-size":e.conditionForm.page.pageSize,total:e.conditionForm.page.total},on:{"update:currentPage":function(t){return e.$set(e.conditionForm.page,"pageNum",t)},"update:current-page":function(t){return e.$set(e.conditionForm.page,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.conditionForm.page,"pageSize",t)},"update:page-size":function(t){return e.$set(e.conditionForm.page,"pageSize",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),o("el-dialog",{directives:[{name:"",rawName:"v-"}],staticClass:"dialog-common-style",attrs:{width:"400px",title:e.dialogTitle,"close-on-click-modal":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},closed:e.resetForm}},[o("el-form",{ref:"roleInfoForm",attrs:{model:e.roleInfoForm,rules:e.rules,"label-width":e.formLabelWidth}},[o("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入名称",autocomplete:"off"},model:{value:e.roleInfoForm.roleName,callback:function(t){e.$set(e.roleInfoForm,"roleName","string"==typeof t?t.trim():t)},expression:"roleInfoForm.roleName"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入描述",autocomplete:"off"},model:{value:e.roleInfoForm.roleDesc,callback:function(t){e.$set(e.roleInfoForm,"roleDesc",t)},expression:"roleInfoForm.roleDesc"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.submitFom}},[e._v("提 交")]),e._v(" "),o("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{directives:[{name:"",rawName:"v-"}],staticClass:"dialog-common-style",attrs:{width:"400px",title:"权限配置",visible:e.dialogRootVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogRootVisible=t},closed:e.resetTree}},[o("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{data:e.rootTreeData,"show-checkbox":"","node-key":"id","default-checked-keys":e.hasConfigRootData,"default-expanded-keys":e.hasExpanded,props:e.defaultProps,"element-loading-text":"权限加载中","element-loading-spinner":"el-icon-loading","default-expand-all":""}}),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small",type:"primary",loading:e.submitLoading},on:{click:e.submitRootSetting}},[e._v("提 交")]),e._v(" "),o("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){e.dialogRootVisible=!1}}},[e._v("取 消")])],1)],1)],1)])},i=[],n={render:a,staticRenderFns:i};t.a=n},jFbC:function(e,t,o){o("Cdx3"),e.exports=o("FeBl").Object.keys},mvHQ:function(e,t,o){e.exports={default:o("qkKv"),__esModule:!0}},qkKv:function(e,t,o){var a=o("FeBl"),i=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},svrf:function(e,t,o){"use strict";var a=o("fZjL"),i=o.n(a),n=o("mvHQ"),r=o.n(n);t.a={name:"roleManage",data:function(){return{getRoleId:"",checkId:[],conditionForm:{condition:[{attribute:"roleName",operate:"like",value:""}],page:{pageNum:1,pageSize:15,total:0,orders:[]}},tableData:[],tableLoading:!1,submitLoading:!1,treeLoading:!1,dialogFormVisible:!1,dialogRootVisible:!1,dialogTitle:"新增角色",formLabelWidth:"100px",roleInfoForm:{id:"",roleName:"",roleDesc:""},rules:{roleName:[{required:!0,message:"请输入角色名"}],roleDesc:[{required:!0,message:"请输入角色描述"}]},rootTreeData:[],hasConfigRootData:[],hasExpanded:[],defaultProps:{children:"children",label:"name"},roleId:""}},mounted:function(){this.getTableItems();var e=[];JSON.parse(sessionStorage.getItem("personal")).roles.forEach(function(t){e.push(t.id)})},methods:{searchData:function(){this.conditionForm.page={pageNum:1,pageSize:15,total:16,orders:[]},this.getTableItems()},getTableItems:function(){var e=this;this.tableLoading=!0,this.$axios.post(globalConfig.server1+"role/query",this.conditionForm).then(function(t){200===t.data.code&&(e.tableData=t.data.data.records,e.conditionForm.page.total=t.data.data.total),setTimeout(function(){e.tableLoading=!1},500)})},resetForm:function(){this.roleInfoForm={id:"",roleName:"",roleDesc:""},this.$refs.roleInfoForm.resetFields(),this.submitLoading=!1},addItems:function(){this.dialogTitle="新增角色",this.dialogFormVisible=!0},editItems:function(e){var t=this;1!==e?e.id:(this.checkId[0].id,e=this.checkId[0]);var o=JSON.parse(r()(e));i()(this.roleInfoForm).forEach(function(e){t.roleInfoForm[e]=o[e]}),this.dialogTitle="编辑角色",this.dialogFormVisible=!0},submitFom:function(){var e=this;this.$refs.roleInfoForm.validate(function(t){if(!t)return!1;e.submitLoading=!0;var o=e.roleInfoForm.id?"role/saveOrUpdate":"role/save";e.$axios.post(""+globalConfig.server1+o,e.roleInfoForm).then(function(t){e.getTableItems(),e.$message[200===t.data.code?"success":"error"](t.data.message),e.dialogFormVisible=!1})})},deleteItems:function(){var e=this;this.$confirm("确定删除该条角色信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=[];e.checkId.forEach(function(e){t.push(e.id)}),e.$axios.post(globalConfig.server1+"role/delete",t).then(function(t){e.$message[200===t.data.code?"success":"error"](t.data.message),e.getTableItems()})}).catch(function(){})},resetTree:function(){this.submitLoading=!1,this.rootTreeData=[]},getRootTreeInfo:function(e){var t=this,o=e.id;this.getRoleId=o,this.dialogRootVisible=!0,this.treeLoading=!0,this.roleId=o,this.$axios.get(globalConfig.server1+"menu-resource/select-menu").then(function(e){if(200===e.data.code){t.rootTreeData=[e.data.data],t.treeLoading=!1}}),this.getRole()},getRole:function(){var e=this;this.getRoleId;this.$axios.post(globalConfig.server1+"menu-resource/select-menu-resource-roles",[this.getRoleId]).then(function(t){if(200===t.data.code){var o=[];o=t.data.data.resources.map(function(e){return e.id}),e.hasConfigRootData=o}})},submitRootSetting:function(){var e=this,t=this.$refs.tree.getCheckedNodes(!1,!0).map(function(e){return e.id});this.$axios.post(globalConfig.server1+"role/insert-permit",{list:this.$refs.tree.getCheckedNodes(!1,!0).map(function(e){return e.id}),object:this.roleId}).then(function(o){if(200===o.data.code){if(t.length==[])return e.$message.error("请选择权限"),!1;e.$message.success("权限配置成功"),e.dialogRootVisible=!1}else e.$message.error("权限配置失败")})},handleSizeChange:function(e){this.conditionForm.pageSize=e,this.getTableItems()},handleCurrentChange:function(e){this.conditionForm.pageNum=e,this.getTableItems()},handleSelectionChange:function(e){this.checkId=e}}}},uqUo:function(e,t,o){var a=o("kM2E"),i=o("FeBl"),n=o("S82l");e.exports=function(e,t){var o=(i.Object||{})[e]||Object[e],r={};r[e]=t(o),a(a.S+a.F*n(function(){o(1)}),"Object",r)}},v2DB:function(e,t,o){var a=o("BsuH");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("1872503c",a,!0,{})}});