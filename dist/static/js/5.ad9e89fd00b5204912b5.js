webpackJsonp([5],{"+Q3P":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,'.steps[data-v-f6a25864]{margin:10px auto;text-align:center;max-width:800px}.goods-info[data-v-f6a25864]{text-align:center;max-width:1300px;margin:auto}.goods-info .el-radio[data-v-f6a25864]{margin-right:20px;margin-bottom:15px}.btn-group .el-button[data-v-f6a25864]{margin:0}.btn-group .el-button[data-v-f6a25864]:not(:last-child):after{content:"";border:1px solid #ddd;height:3px;margin:0 5px}.attr>[data-v-f6a25864]{margin-right:10px}.inline-item[data-v-f6a25864]{margin-right:20px}.inline-item label[data-v-f6a25864]{width:80px;color:#666}.inline-item .el-input[data-v-f6a25864]{width:120px}.form-section[data-v-f6a25864]{display:-webkit-box;display:-ms-flexbox;display:flex;text-align:left}.form-section .section-head[data-v-f6a25864]{width:200px;font-weight:600;height:40px;line-height:40px;text-align:right}.form-section .section-body[data-v-f6a25864]{padding:30px 20px}.item[data-v-f6a25864]{display:-webkit-box;display:-ms-flexbox;display:flex;font-size:14px;color:#5a5e66;margin-top:30px}.item .item-label[data-v-f6a25864]{width:100px;height:40px;line-height:40px;text-align:right;padding-right:20px}.item-body[data-v-f6a25864]{overflow-x:auto;width:800px}.label-input[data-v-f6a25864]{width:100px}.icon-btn[data-v-f6a25864]{font-size:20px;cursor:pointer;padding-right:10px}.danger[data-v-f6a25864]{color:#f56c6c}.primary[data-v-f6a25864]{color:#409eff}.attr-list[data-v-f6a25864]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.predict-attr-head[data-v-f6a25864],.select-attr[data-v-f6a25864]{position:relative;padding:5px}.danger-text-btn[data-v-f6a25864]{position:absolute;left:264px;cursor:pointer}.select-attr .el-input[data-v-f6a25864]{width:100%}.error-input .el-input__inner[data-v-f6a25864]{border-color:#f56c6c}.item-kg[data-v-f6a25864]{width:200px}',""])},"1rHw":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"image-upload"},[e._l(e.previewImages,function(t,i){return a("div",{key:i,staticClass:"imgHeader"},["info"===e.pageAction?a("i",{staticClass:"ifont"}):e._e(),e._v(" "),"edit"===e.pageAction?a("i",{staticClass:"el-icon-close ifont",on:{click:function(t){return e.detailImg(i)}}}):e._e(),e._v(" "),a("img",{attrs:{src:t,alt:"未获取到图片",width:e.width,height:e.height},on:{click:function(t){return e.replaceImg(i)}}})])}),e._v(" "),e.previewImages.length<e.limit&&"viewImg"!==e.mode?a("label",{style:"width: "+e.width+"; height: "+e.height+";",attrs:{for:e.name+"uploader"}},[a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v(" "),a("input",{staticClass:"upfile",attrs:{accept:e.accept,multiple:e.multiple,type:"file",id:e.name+"uploader",hidden:""},on:{change:e.handleFileChange}})],2)},r=[],o={render:i,staticRenderFns:r};t.a=o},"9bBU":function(e,t,a){a("mClu");var i=a("FeBl").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},BO1k:function(e,t,a){e.exports={default:a("fxRn"),__esModule:!0}},C4MV:function(e,t,a){e.exports={default:a("9bBU"),__esModule:!0}},H97s:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".image-upload[data-v-1c5469a1]{display:-webkit-box}.image-upload img[data-v-1c5469a1]{margin-right:10px}.image-upload label[data-v-1c5469a1]{display:block;font-size:20px;color:#8c939d;line-height:100px;text-align:center;border:1.8px dashed #ccc;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.image-upload label[data-v-1c5469a1]:hover{border-color:#409eff}.imgHeader[data-v-1c5469a1]{position:relative}.ifont[data-v-1c5469a1]{position:absolute;right:0;top:7px;left:76px;color:#333;font-size:20px}",""])},Hc3T:function(e,t,a){"use strict";var i=a("mvHQ"),r=a.n(i),o=a("bOdI"),s=a.n(o),n=a("pFYg"),l=a.n(n),c=a("BO1k"),d=a.n(c),p=a("woOf"),u=a.n(p),m=a("bnA/"),f=a("pBwn");t.a={components:{imageUpload:m.a},data:function(){return{logisticsType:"3",storeImg:[],infoStore:[],addStatus:0,activeTab:"type",commonTypes:[],subTypes:[],groups:[],grands:[],goodAttrs:[],parentType:{id:"",name:""},initGoodsCommon:{id:-1,typeId:"",grandId:"",name:"",description:"",transformFee:"",transformFeeLabel:0,pic1:"",pic2:"",pic3:"",pic4:"",pic5:"",pic6:"",groupId:"",logisticsType:"3"},goodsCommon:u()({},this.initGoodsCommon),goodsCommonRules:{name:{required:!0,message:"请填写名称"},typeId:{required:!0,message:"请选择详细类别"},grandId:{required:!0,message:"请选择品牌"},transformFeeLabel:{required:!1,validator:f.e,enableZero:!0}},initGoods:{price:0,priceLabel:0,procurementPrice:0,procurementPriceLabel:0,size:0,weight:0,goods2attrsBeans:[{attrsId:1,value:"假规格",pic:"noimage"}]},goodTemplate:{price:0,priceLabel:0,procurementPrice:0,procurementPriceLabel:0,canSellSize:0,size:0,weight:0},goods:[],predictTableHead:[{id:1,name:"women"}],predictGoods:[],preparedGoods:[],goodsRules:{priceLabel:{validator:f.f,firstMessage:"请输入价格",required:!0},procurementPriceLabel:{validator:f.f,firstMessage:"请输入成本",required:!0},size:{validator:f.e,firstMessage:"请输入库存",required:!0}},attrImgEnable:!1,mainPicPreview:null,uploadImageNum:0,imageUploadResults:[],attrGoods:[],predictAttrs:[],saving:!1,replaceImageIndex:"",goodsTableHeaders:[],tempAttr:{}}},mounted:function(){this.getCommonTypes(),this.getGroups(),this.getGrands()},methods:{getCommonTypes:function(){var e=this;this.$http.ajax({url:APIHOST+"api/goodsType/getTypes/0",dataType:"json",context:this}).done(function(t){1===t.result?e.commonTypes=t.object:console.error("获取商品分类失败")}).fail(function(){console.log("获取商品分类接口出错")})},getSubTypes:function(){var e=this;this.$http.ajax({url:APIHOST+"api/goodsType/getTypes/"+this.parentType.id,dataType:"json",context:this}).done(function(t){1===t.result?e.subTypes=t.object:console.error("获取商品分类失败")}).fail(function(){console.log("获取商品分类接口出错")})},getGrands:function(){var e=this;this.$http.ajax({url:APIHOST+"api/grand/getAll",dataType:"json",context:this}).done(function(t){1===t.result?e.grands=t.object:console.error("获取品牌失败")}).fail(function(){console.log("获取商品品牌接口出错")})},getGroups:function(){var e=this;this.$http.ajax({url:APIHOST+"api/store/getGroup",dataType:"json",context:this}).done(function(t){1===t.result?e.groups=t.list:console.error("获取商品分组失败")}).fail(function(){console.log("获取商品分组接口出错")})},removeArrItem:function(e,t){e.splice(t,1)},addPredictAttr:function(){if(!this.tempAttr.id)return void this.$message.info("请先选择规格");var e=!0,t=!1,a=void 0;try{for(var i,r=d()(this.predictAttrs);!(e=(i=r.next()).done);e=!0){var o=i.value;if(this.tempAttr.id===o.id)return void this.$message.info("不能重复添加规格")}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}this.predictAttrs.push({id:this.tempAttr.id,name:this.tempAttr.name,innerAttrs:[{value:"未命名"}]})},addInnerAttr:function(e){e.innerAttrs.push({value:"未命名"})},addAttr:function(){},generatePredictGoods:function(){var e=this,t=[],a=!1,i=!1;return this.predictAttrs.forEach(function(r,o,n){var c=[];e:for(var p=0;p<r.innerAttrs.length;p++){var m=function(e){return c.find(function(t){return t.value===r.innerAttrs[e].value})?(a=!0,c=[],{v:void 0}):r.innerAttrs[e].value?void c.push(r.innerAttrs[e]):(c=[],i=!0,{v:!1})}(p);switch(m){case"break":break e;default:if("object"===(void 0===m?"undefined":l()(m)))return m.v}}var f=[];if(o>0){var g=!0,v=!1,h=void 0;try{for(var b,y=d()(t[o-1]);!(g=(b=y.next()).done);g=!0){var x=b.value,w=!0,_=!1,C=void 0;try{for(var I,A=d()(r.innerAttrs);!(w=(I=A.next()).done);w=!0){var T=I.value;f.push(u()({},x,s()({},"attr_"+r.id,T.value)))}}catch(e){_=!0,C=e}finally{try{!w&&A.return&&A.return()}finally{if(_)throw C}}}}catch(e){v=!0,h=e}finally{try{!g&&y.return&&y.return()}finally{if(v)throw h}}}else{var k=!0,$=!1,S=void 0;try{for(var L,P=d()(r.innerAttrs);!(k=(L=P.next()).done);k=!0){var z=L.value;f.push(u()({},e.goodTemplate,s()({},"attr_"+r.id,z.value)))}}catch(e){$=!0,S=e}finally{try{!k&&P.return&&P.return()}finally{if($)throw S}}}t[o]=f}),a?(this.$message.error("规格有重复值"),!1):i?(this.$message.error("规格有空值"),!1):void(this.predictGoods=t[t.length-1])},removePredictGood:function(e){this.predictGoods.splice(e,1)},mergeAttrColumn:function(e){e.row,e.column,e.rowIndex,e.columnIndex},getAttrs:function(){var e=this;this.$http.ajax({url:APIHOST+"api/Attrs/getByType/"+this.parentType.id,dataType:"json",context:this}).done(function(t){1===t.result?e.goodAttrs=t.object:console.error("获取商品属性失败")}).fail(function(){console.log("获取商品属性接口出错  ")})},resetForms:function(){this.parentType={id:"",name:""},this.goodsCommon=u()({},this.initGoodsCommon),this.$refs.goodsCommonForm.resetFields(),this.preparedGoods=[],this.predictGoods=[],this.predictAttrs=[],this.tempAttr={},this.activeTab="type",this.addStatus=0},validateType:function(){if(this.parentType.id){var e=!0,t=!1,a=void 0;try{for(var i,r=d()(this.commonTypes);!(e=(i=r.next()).done);e=!0){var o=i.value;o.id===this.parentType.id&&(this.parentType.name=o.type_name)}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}this.getSubTypes(),this.getAttrs(),this.activeTab="basic",this.addStatus=1}else this.$message.error("请选择商品类别")},validateNum:function(e){return""!==e&&(!isNaN(Number(e))&&!(e<0))},validatePredictGoods:function(){if(!this.predictGoods.length)return this.$message.error("请填写商品规格"),!1;var e=!0,t=!1,a=void 0;try{for(var i,r=d()(this.predictGoods);!(e=(i=r.next()).done);e=!0){var o=i.value;if(!(this.validateNum(o.priceLabel)&&this.validateNum(o.procurementPriceLabel)&&this.validateNum(o.size)&&this.validateNum(o.weight)))return this.$message.error("商品详细数据填写错误"),!1}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}return!0},validateBasic:function(){var e=this;this.$refs.goodsCommonForm.validate(function(t){return t?e.$refs.imageUploader.files&&e.$refs.imageinfoUpload.files?void(e.validatePredictGoods()&&(e.$refs.imageinfoUpload.upload(),e.prepareGoods())):void e.$message.error("请至少添加一个图片"):void e.$message.error("必填项没有完善")})},prepareGoods:function(){this.preparedGoods=this.predictGoods.map(function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&a.startsWith("attr")&&t.push({attrsId:a.split("_")[1],value:e[a]});return e.price=100*e.priceLabel,e.procurementPrice=100*e.procurementPriceLabel,e.weight=1e3*e.weight,e.goods2attrsBeans=t,e})},finishAdd:function(){},createGoods:function(e){for(var t=this,a=0;a<e.length;a++)this.goodsCommon["pic"+(a+1)]=e[a];this.goodsCommon.transformFee=1*this.goodsCommon.transformFeeLabel,this.goodsCommon.logisticsType=this.logisticsType,this.saving=!0,this.$http.ajax({url:APIHOST+"api/goods/add",contentType:"application/json; charset=utf-8",type:"post",dataType:"json",data:r()({goodsCommon:this.goodsCommon,goods:this.preparedGoods}),context:this}).done(function(e){1===e.result?(t.$message({message:"保存成功",type:"success"}),t.resetForms()):t.$message({message:e.msg,type:"error"})}).fail(function(){console.log("商品添加接口出错")}).always(function(){t.saving=!1})},saveImg:function(e){for(var t="",a=0;a<e.length;a++)e[a]&&(a!=e.length-1?t+=e[a]+",":t+=e[a]);t.split("."),this.goodsCommon.detail=t,this.$refs.imageUploader.upload()},numInput:function(e){e.canSellSize=e.canSellSize.replace(/[^\d]/g,""),e.canSellSize=e.canSellSize.replace(/^/g,""),e.canSellSize=e.canSellSize.replace(/^0\d[0-9]*/g,"")},numInput2:function(e){e.size=e.size.replace(/[^\d]/g,""),e.size=e.size.replace(/^/g,""),e.size=e.size.replace(/^0\d[0-9]*/g,"")},checknum:function(e){e.priceLabel=e.priceLabel.replace(/[^\d\.]/g,""),e.priceLabel=e.priceLabel.replace(/^\./g,""),e.priceLabel=e.priceLabel.replace(/^0\d[0-9]*/g,""),e.priceLabel=e.priceLabel.replace(/\.{2,}/g,"."),e.priceLabel=e.priceLabel.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.priceLabel=e.priceLabel.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")},checknum2:function(e){console.log(e),e.procurementPriceLabel=e.procurementPriceLabel.replace(/[^\d\.]/g,""),e.procurementPriceLabel=e.procurementPriceLabel.replace(/^\./g,""),e.procurementPriceLabel=e.procurementPriceLabel.replace(/^0\d[0-9]*/g,""),e.procurementPriceLabel=e.procurementPriceLabel.replace(/\.{2,}/g,"."),e.procurementPriceLabel=e.procurementPriceLabel.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.procurementPriceLabel=e.procurementPriceLabel.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")},checkWeight:function(e){e.weight=e.weight.replace(/[^\d\.]/g,""),e.weight=e.weight.replace(/^\./g,""),e.weight=e.weight.replace(/^0\d[0-9]*/g,""),e.weight=e.weight.replace(/\.{2,}/g,"."),e.weight=e.weight.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e.weight=e.weight.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}}}},Kajt:function(e,t,a){"use strict";function i(e){a("kzvD"),a("p5tq")}Object.defineProperty(t,"__esModule",{value:!0});var r=a("Hc3T"),o=a("lhLs"),s=a("VU/8"),n=i,l=s(r.a,o.a,!1,n,"data-v-f6a25864",null);t.default=l.exports},bOdI:function(e,t,a){"use strict";t.__esModule=!0;var i=a("C4MV"),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},"bnA/":function(e,t,a){"use strict";function i(e){a("jeAz")}var r=a("irJt"),o=a("1rHw"),s=a("VU/8"),n=i,l=s(r.a,o.a,!1,n,"data-v-1c5469a1",null);t.a=l.exports},fxRn:function(e,t,a){a("+tPU"),a("zQR9"),e.exports=a("g8Ux")},g8Ux:function(e,t,a){var i=a("77Pl"),r=a("3fs2");e.exports=a("FeBl").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},irJt:function(e,t,a){"use strict";var i=a("BO1k"),r=a.n(i),o=a("//Fk"),s=a.n(o);t.a={props:["name","uploaderMode","externalPreviewImages","limit","accept","uploadUrl","success","width","height","pageAction2"],data:function(){return{files:[],previewImages:this.externalPreviewImages||[],replaceIndex:-1,uploadedCount:0,replacedImg:new Array(this.externalPreviewImages.length),uploadRes:[]}},computed:{mode:function(){return this.uploaderMode},pageAction:function(){var e=this.$route.path.split("/").pop();return"store"===e?this.pageAction2:e}},watch:{externalPreviewImages:function(){"upload"!==this.mode&&(this.previewImages=this.externalPreviewImages||[])}},methods:{addFile:function(e){var t=this;console.log(e),console.log(this.accept);var a=e.size/1024<200;if(this.accept&&!e.type.match(this.accept.split("/")[0]))throw Error("from imageUpload：“文件格式不正确”");new s.a(function(i,r){var o=new FormData;if(a)o.append("file",e),-1!==t.replaceIndex?(t.files.splice(t.replaceIndex,1,e),t.previewImages.splice(t.replaceIndex,1,window.URL.createObjectURL(e)),t.replacedImg[t.replaceIndex]=!0,t.replaceIndex=-1):t.files.length<t.limit&&(t.files.push(e),t.previewImages.push(window.URL.createObjectURL(e)));else{var s=t;t.photoCompress(e,{quality:.1},function(t){var i=s.convertBase64UrlToBlob(t);if(!(i.size/1024<200))return s.$message.error("上传图片大小不能超过 200KB!"),a;o.append("file",i),e=i,-1!==s.replaceIndex?(s.files.splice(s.replaceIndex,1,e),s.previewImages.splice(s.replaceIndex,1,window.URL.createObjectURL(e)),s.replacedImg[s.replaceIndex]=!0,s.replaceIndex=-1):s.files.length<s.limit&&(s.files.push(e),s.previewImages.push(window.URL.createObjectURL(e)))})}}),document.querySelectorAll(".upfile").forEach(function(e){e.value=""})},photoCompress:function(e,t,a){var i=new FileReader;i.readAsDataURL(e);var r=this;i.onload=function(){var e=this.result;r.canvasDataURL(e,t,a)}},canvasDataURL:function(e,t,a){var i=new Image;i.src=e,i.onload=function(){var e=this,i=.5,r=e.width,o=e.height,s=r/o;r=t.width||r,o=t.height||r/s,t.quality&&t.quality>0&&t.quality<=1&&(i=t.quality);var n=document.createElement("canvas"),l=n.getContext("2d"),c=document.createAttribute("width");c.nodeValue=r;var d=document.createAttribute("height");d.nodeValue=o,n.setAttributeNode(c),n.setAttributeNode(d),l.drawImage(e,0,0,r,o);var p=n.toDataURL("image/jpeg",i);a(p)}},convertBase64UrlToBlob:function(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,o=new Uint8Array(r);r--;)o[r]=i.charCodeAt(r);return new Blob([o],{type:a})},handleFileChange:function(e){var t=e.target.files,a=!0,i=!1,o=void 0;try{for(var s,n=r()(t);!(a=(s=n.next()).done);a=!0){var l=s.value;this.addFile(l)}}catch(e){i=!0,o=e}finally{try{!a&&n.return&&n.return()}finally{if(i)throw o}}},replaceImg:function(e){"viewImg"!==this.mode&&(this.replaceIndex=e,document.querySelector("#"+this.name+"uploader").click())},upload:function(){var e=this;if(console.log("uploaduploaduploaduploaduploaduploaduploaduploaduploaduploaduploadupload"),console.log(this.$GETIMGHOST),this.uploadedCount=0,this.uploadRes=new Array(this.files.length),!this.uploadUrl)throw new Error("from imageUpload：缺少uploadUrl");if(console.log(this.files),!this.files.length){var t=[];return void this.success(t)}for(var a=0;a<this.files.length;a++)!function(t){var a=e.files[t],i=new FileReader;i.onload=function(i){var r=new XMLHttpRequest;r.open("POST",e.uploadUrl),r.setRequestHeader("Content-type",a.type.split("/")[1]),r.onreadystatechange=function(){if(4===r.readyState)if(4===r.readyState&&200===r.status){var a=JSON.parse(r.responseText);if(a.ret?e.uploadRes[t]=a.info.md5:(e.uploadRes[t]="",e.$message.error("第"+(t+1)+"张图片上传失败："+a.error.message)),++e.uploadedCount===e.uploadRes.length){var i=new Array(e.replacedImg.length);if("replace"===e.mode){for(var o=0,s=0;o<e.replacedImg.length&&s<e.uploadRes.length;o++)e.replacedImg[o]?(i[o]=e.uploadRes[s],s++):i[o]="";s<e.uploadRes.length&&(i=i.concat(e.uploadRes.slice(s)))}else i=e.uploadRes;e.success(i)}}else if(200!==r.status&&304!==r.status)throw new Error("from imageUpload: 上传图片失败")},r.send(i.target.result)},i.readAsArrayBuffer(a)}(a)},detailImg:function(e){this.previewImages.splice(e,1)},reset:function(){this.files.splice(0),this.previewImages.splice(0),this.uploadRes.splice(0),this.uploadedCount=0}}}},jeAz:function(e,t,a){var i=a("H97s");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("7fd4c021",i,!0,{})},kzvD:function(e,t,a){var i=a("+Q3P");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("65de996d",i,!0,{})},lhLs:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[a("i",{staticClass:"fa fa-shopping-bag",attrs:{"aria-hidden":"true"}}),e._v("\n        商品管理\n      ")]),e._v(" "),a("el-breadcrumb-item",[e._v("发布商品")])],1)],1),e._v(" "),a("div",{staticClass:"content"},[a("el-form",[a("el-steps",{staticClass:"steps",attrs:{space:200,"align-center":"",active:e.addStatus,"finish-status":"success"}},[a("el-step",{attrs:{title:"商品类别"}}),e._v(" "),a("el-step",{attrs:{title:"基本信息"}}),e._v(" "),a("el-step",{attrs:{title:"商品详情"}})],1),e._v(" "),a("el-tabs",{staticClass:"goods-info",attrs:{value:e.activeTab,type:"border-card"}},[a("el-tab-pane",{attrs:{label:"选择商品类别",name:"type",disabled:!0}},[a("div",{staticClass:"row"},e._l(e.commonTypes,function(t){return a("el-radio",{key:t.id,attrs:{label:t.id,border:""},model:{value:e.parentType.id,callback:function(t){e.$set(e.parentType,"id",t)},expression:"parentType.id"}},[e._v(e._s(t.type_name))])}),1),e._v(" "),a("el-button",{staticClass:"next-btn",attrs:{type:"primary",size:"small",disabled:"type"!==e.activeTab},on:{click:e.validateType}},[e._v("下一步")])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"编辑基本信息",name:"basic",disabled:!0}},[a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-head"},[e._v("基本信息")]),e._v(" "),a("div",{staticClass:"section-body"},[a("el-form",{ref:"goodsCommonForm",attrs:{model:e.goodsCommon,rules:e.goodsCommonRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品类别："}},[a("span",[e._v(e._s(e.parentType.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"详细类别：",prop:"typeId"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择类别"},model:{value:e.goodsCommon.typeId,callback:function(t){e.$set(e.goodsCommon,"typeId",t)},expression:"goodsCommon.typeId"}},e._l(e.subTypes,function(e,t){return a("el-option",{key:t,attrs:{label:e.type_name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"商品品牌：",prop:"grandId"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择品牌"},model:{value:e.goodsCommon.grandId,callback:function(t){e.$set(e.goodsCommon,"grandId",t)},expression:"goodsCommon.grandId"}},e._l(e.grands,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.getGrands}},[e._v("刷新")])],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[a("el-input",{staticClass:"select-input",attrs:{size:"small"},model:{value:e.goodsCommon.name,callback:function(t){e.$set(e.goodsCommon,"name","string"==typeof t?t.trim():t)},expression:"goodsCommon.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品描述：",prop:"description"}},[a("el-input",{staticClass:"select-input",attrs:{placeholder:"描述不可超过1000字",size:"small",maxlength:"1000"},model:{value:e.goodsCommon.description,callback:function(t){e.$set(e.goodsCommon,"description","string"==typeof t?t.trim():t)},expression:"goodsCommon.description"}})],1)],1),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"item-label validator"},[e._v("商品图片：")]),e._v(" "),a("div",{staticClass:"item-body"},[a("image-upload",{ref:"imageUploader",attrs:{uploaderMode:"upload",name:"icon",externalPreviewImages:e.storeImg,limit:6,accept:"image/*",uploadUrl:e.$IMGHOST+"upload",multiple:!0,success:e.createGoods,width:"100px",height:"100px"}})],1)]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"item-label validator"},[e._v("详情图片：")]),e._v(" "),a("div",{staticClass:"item-body"},[a("image-upload",{ref:"imageinfoUpload",attrs:{uploaderMode:"upload",name:"icons",externalPreviewImages:e.infoStore,limit:20,accept:"image/*",uploadUrl:e.$IMGHOST+"upload",multiple:!0,success:e.saveImg,width:"100px",height:"100px"}})],1)])],1)]),e._v(" "),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-head"},[e._v("库存/规格")]),e._v(" "),a("div",{staticClass:"section-body"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("商品规格：")]),e._v(" "),a("div",{staticClass:"item-body"},[a("div",{staticClass:"formats"},[a("div",{staticClass:"select-attr"},[a("el-select",{attrs:{size:"small",placeholder:"规格","value-key":"id"},model:{value:e.tempAttr,callback:function(t){e.tempAttr=t},expression:"tempAttr"}},e._l(e.goodAttrs,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small"},on:{click:e.addPredictAttr}},[e._v("添加")])],1),e._v(" "),a("ul",e._l(e.predictAttrs,function(t,i){return a("li",{key:i,staticClass:"predict-attr"},[a("div",{staticClass:"predict-attr-head"},[a("label",[e._v(e._s(t.name))]),e._v(" "),a("span",{staticClass:"danger-text-btn",attrs:{type:"text"},on:{click:function(t){return e.removeArrItem(e.predictAttrs,i)}}},[e._v("删除")])]),e._v(" "),a("ul",{staticClass:"attr-list"},[e._l(t.innerAttrs,function(t,i){return a("li",{key:i,staticClass:"attr"},[a("el-input",{staticClass:"label-input",attrs:{size:"small"},model:{value:t.value,callback:function(a){e.$set(t,"value","string"==typeof a?a.trim():a)},expression:"innerAttr.value"}})],1)}),e._v(" "),a("i",{staticClass:"el-icon-remove icon-btn danger",on:{click:function(a){return e.removeArrItem(t.innerAttrs,e.innerIndex)}}}),e._v(" "),a("i",{staticClass:"el-icon-circle-plus icon-btn primary",on:{click:function(a){return e.addInnerAttr(t)}}})],2)])}),0),e._v(" "),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small"},on:{click:e.generatePredictGoods}},[e._v("确认规格")])],1)])]),e._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("详细商品：")]),e._v(" "),a("div",{staticClass:"item-body no-flex"},[a("el-table",{staticClass:"disScoll",staticStyle:{"max-width":"800px"},attrs:{data:e.predictGoods,"span-method":e.mergeAttrColumn,"header-cell-style":{background:"#E8EAEE",height:"48px"}}},[e._l(this.predictAttrs,function(e){return a("el-table-column",{key:e.id,attrs:{align:"center",prop:"attr_"+e.id,label:e.name}})}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"canCellSize",label:"可售库存","max-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"sm-input",attrs:{size:"small"},on:{input:function(a){return e.numInput(t.row)}},model:{value:t.row.canSellSize,callback:function(a){e.$set(t.row,"canSellSize","string"==typeof a?a.trim():a)},expression:"scope.row.canSellSize"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"canCellSize",label:"库存","max-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"sm-input",attrs:{size:"small"},on:{input:function(a){return e.numInput2(t.row)}},model:{value:t.row.size,callback:function(a){e.$set(t.row,"size","string"==typeof a?a.trim():a)},expression:"scope.row.size"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"price",label:"价格","max-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"sm-input",attrs:{size:"small"},on:{input:function(a){return e.checknum(t.row)}},model:{value:t.row.priceLabel,callback:function(a){e.$set(t.row,"priceLabel","string"==typeof a?a.trim():a)},expression:"scope.row.priceLabel"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"procurementPrice",label:"成本","max-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"sm-input",attrs:{size:"small"},on:{input:function(a){return e.checknum2(t.row)}},model:{value:t.row.procurementPriceLabel,callback:function(a){e.$set(t.row,"procurementPriceLabel","string"==typeof a?a.trim():a)},expression:"scope.row.procurementPriceLabel"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"weight",label:"单品重量(kg)","max-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"sm-input",attrs:{size:"small"},on:{input:function(a){return e.checkWeight(t.row)}},model:{value:t.row.weight,callback:function(a){e.$set(t.row,"weight","string"==typeof a?a.trim():a)},expression:"scope.row.weight"}})]}}])})],2)],1)])])]),e._v(" "),a("div",{staticClass:"form-section"},[a("div",{staticClass:"section-head"},[e._v("物流/其他")]),e._v(" "),a("div",{staticClass:"section-body"},[a("div",{staticClass:"item"},[a("div",{staticClass:"item-label"},[e._v("配送方式：")]),e._v(" "),a("div",{staticClass:"item-body",staticStyle:{"line-height":"41px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.logisticsType,callback:function(t){e.logisticsType=t},expression:"logisticsType"}},[e._v("物流配送")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.logisticsType,callback:function(t){e.logisticsType=t},expression:"logisticsType"}},[e._v("支持自提")]),e._v(" "),a("el-radio",{attrs:{label:"3"},model:{value:e.logisticsType,callback:function(t){e.logisticsType=t},expression:"logisticsType"}},[e._v("物流+自提")])],1)])])]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.resetForms}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.saving},on:{click:e.validateBasic}},[e._v("提交")])],1)],1)],1)],1)])},r=[],o={render:i,staticRenderFns:r};t.a=o},mClu:function(e,t,a){var i=a("kM2E");i(i.S+i.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},p5tq:function(e,t,a){var i=a("yBxz");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("732050af",i,!0,{})},pBwn:function(e,t,a){"use strict";function i(e){return e/100}function r(e){return e/1e3}function o(e){if(!e)return"-";var t=new Date(1e3*e),a=t.getFullYear()+"",i=t.getMonth()+1+"",r=t.getDate()+"",o=t.getHours()+"",s=t.getMinutes()+"",n=t.getSeconds()+"";return a+"年"+(i[1]?i:"0"+i)+"月"+(r[1]?r:"0"+r)+"日 "+(o[1]?o:"0"+o)+":"+(s[1]?s:"0"+s)+":"+(n[1]?n:"0"+n)}function s(e,t){var a=!0,i=!1,r=void 0;try{for(var o,s=d()(e);!(a=(o=s.next()).done);a=!0){var n=o.value;if(n.value===t)return n.label}}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return"未知"}function n(e,t,a){if(""===t&&e.required)a(new Error(e.firstMessage));else if(isNaN(Number(t)))a(new Error("请输入数字"));else{if(t<=0&&!e.enableZero)return a(new Error("请输入大于零的数字"));if(/\./.test(t))return a(new Error("请输入整数"));a()}}function l(e,t,a){if(""===t&&e.required)a(new Error(e.firstMessage));else if(isNaN(Number(t)))a(new Error("请输入数字"));else{if(t<=0)return a(new Error("请输入大于零的金额"));/\./.test(t)&&!/\.\d{2}$/.test(t)?a(new Error("小数点后需输入两位")):a()}}a.d(t,"a",function(){return i}),a.d(t,"b",function(){return o}),a.d(t,"c",function(){return s}),a.d(t,"e",function(){return n}),a.d(t,"f",function(){return l}),a.d(t,"d",function(){return r});var c=a("BO1k"),d=a.n(c)},qkKv:function(e,t,a){var i=a("FeBl"),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},yBxz:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".disScoll .el-table__body-wrapper{overflow:auto!important}",""])}});